<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Numerimag - Kiosque Digital</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Cormorant+Garamond:wght@500;600&display=swap" rel="stylesheet">
    <script>
        window.hideLoading = function() {
            var el = document.getElementById('readerLoading');
            if (el) el.style.display = 'none';
        };
    </script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: #1a1a1a; color: #fff; min-height: 100vh; }
        
        .header {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            padding: 16px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(201, 169, 98, 0.2);
        }
        .header-content { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
        
        .header-branding { display: flex; align-items: center; gap: 16px; }
        .business-logo { 
            width: 44px; 
            height: 44px; 
            background: linear-gradient(135deg, #C9A962 0%, #a8893e 100%); 
            border-radius: 10px; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            font-size: 20px;
            box-shadow: 0 4px 12px rgba(201, 169, 98, 0.3);
            overflow: hidden;
        }
        .business-logo img { width: 100%; height: 100%; object-fit: cover; }
        .business-info { display: flex; flex-direction: column; }
        .business-name { font-family: 'Cormorant Garamond', serif; font-size: 20px; font-weight: 600; color: #fff; }
        .powered-by { font-size: 10px; color: #666; display: flex; align-items: center; gap: 4px; }
        .powered-by span { color: #C9A962; font-weight: 600; }
        
        .timer { display: flex; align-items: center; gap: 8px; background: rgba(201, 169, 98, 0.1); padding: 6px 14px; border-radius: 20px; font-size: 13px; color: #C9A962; }
        
        .main { max-width: 1400px; margin: 0 auto; padding: 20px; }
        
        .welcome-screen { text-align: center; padding: 24px 20px; }
        .welcome-screen h1 { font-family: 'Cormorant Garamond', serif; font-size: 28px; font-weight: 500; margin-bottom: 8px; color: #fff; }
        .welcome-screen p { color: #888; font-size: 14px; margin-bottom: 20px; }
        
        .stats { display: flex; justify-content: center; gap: 30px; margin-bottom: 24px; flex-wrap: wrap; }
        .stat { text-align: center; }
        .stat-number { font-size: 36px; font-weight: 700; color: #C9A962; }
        .stat-label { font-size: 11px; color: #666; text-transform: uppercase; letter-spacing: 1px; }
        
        .documents-section {
            background: linear-gradient(135deg, rgba(201, 169, 98, 0.15) 0%, rgba(201, 169, 98, 0.05) 100%);
            border: 1px solid rgba(201, 169, 98, 0.3);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
        }
        .documents-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        .documents-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: 'Cormorant Garamond', serif;
            font-size: 20px;
            font-weight: 600;
            color: #C9A962;
        }
        .documents-title .icon { font-size: 24px; }
        .pro-badge {
            background: linear-gradient(135deg, #C9A962 0%, #a8893e 100%);
            color: #1a1a1a;
            font-size: 10px;
            font-weight: 700;
            padding: 4px 10px;
            border-radius: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .documents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 12px;
        }
        .document-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        .document-card:hover {
            background: rgba(201, 169, 98, 0.1);
            border-color: rgba(201, 169, 98, 0.3);
            transform: translateY(-2px);
        }
        .document-icon { font-size: 32px; margin-bottom: 8px; }
        .document-name { font-size: 13px; font-weight: 600; color: #fff; margin-bottom: 4px; }
        .document-type { font-size: 10px; color: #888; text-transform: uppercase; }
        
        .section-divider {
            display: flex;
            align-items: center;
            gap: 16px;
            margin: 24px 0 16px;
        }
        .section-divider-line { flex: 1; height: 1px; background: rgba(255, 255, 255, 0.1); }
        .section-divider-title { font-family: 'Cormorant Garamond', serif; font-size: 18px; color: #888; white-space: nowrap; }
        
        .categories { display: flex; gap: 8px; overflow-x: auto; padding: 12px 0; margin-bottom: 16px; scrollbar-width: none; }
        .categories::-webkit-scrollbar { display: none; }
        .category-btn { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #fff; padding: 8px 16px; border-radius: 18px; cursor: pointer; font-size: 12px; font-weight: 500; white-space: nowrap; transition: all 0.3s; }
        .category-btn:hover, .category-btn.active { background: #C9A962; border-color: #C9A962; color: #1a1a1a; }
        
        .magazine-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 16px; }
        .magazine-card { background: #242424; border-radius: 12px; overflow: hidden; cursor: pointer; transition: all 0.3s; border: 1px solid rgba(255,255,255,0.05); }
        .magazine-card:hover { transform: translateY(-3px); border-color: rgba(201, 169, 98, 0.3); box-shadow: 0 12px 24px rgba(0,0,0,0.3); }
        
        .magazine-cover { position: relative; height: 140px; overflow: hidden; }
        .magazine-cover img { width: 100%; height: 100%; object-fit: cover; }
        .magazine-badges { position: absolute; top: 8px; left: 8px; display: flex; gap: 4px; flex-wrap: wrap; }
        .badge { padding: 3px 7px; border-radius: 8px; font-size: 9px; font-weight: 600; text-transform: uppercase; }
        .badge-be { background: linear-gradient(90deg, #000 33%, #FFD700 33%, #FFD700 66%, #FF0000 66%); color: #fff; text-shadow: 0 1px 2px rgba(0,0,0,0.5); }
        .badge-fr { background: linear-gradient(90deg, #002395 33%, #fff 33%, #fff 66%, #ED2939 66%); color: #002395; }
        .badge-new { background: #C9A962; color: #1a1a1a; }
        
        .magazine-info { padding: 12px; }
        .magazine-title { font-family: 'Cormorant Garamond', serif; font-size: 16px; font-weight: 600; margin-bottom: 3px; color: #fff; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .magazine-subtitle { font-size: 11px; color: #888; margin-bottom: 8px; line-height: 1.3; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; height: 28px; }
        .magazine-meta { display: flex; justify-content: space-between; align-items: center; font-size: 10px; color: #666; }
        .magazine-source { background: rgba(201, 169, 98, 0.1); padding: 2px 6px; border-radius: 6px; color: #C9A962; font-size: 9px; }
        
        .reader-view { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #1a1a1a; z-index: 1000; }
        .reader-view.active { display: flex; flex-direction: column; }
        .reader-header { display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; background: #242424; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .reader-back { display: flex; align-items: center; gap: 6px; background: none; border: none; color: #fff; cursor: pointer; font-size: 13px; padding: 6px 12px; border-radius: 6px; transition: background 0.2s; }
        .reader-back:hover { background: rgba(255,255,255,0.1); }
        .reader-title { font-family: 'Cormorant Garamond', serif; font-size: 16px; color: #fff; }
        .reader-source { background: rgba(201, 169, 98, 0.1); padding: 4px 10px; border-radius: 8px; color: #C9A962; font-size: 11px; }
        .reader-content { flex: 1; position: relative; overflow: hidden; }
        .reader-content iframe { width: 100%; height: 100%; border: none; }
        .reader-loading { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: #888; }
        .spinner { width: 32px; height: 32px; border: 3px solid rgba(201, 169, 98, 0.2); border-top-color: #C9A962; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 10px; }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        .demo-banner { background: #C9A962; color: #1a1a1a; text-align: center; padding: 10px 20px; font-size: 13px; font-weight: 500; }
        .demo-banner a { color: #1a1a1a; text-decoration: underline; margin-left: 10px; }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(201, 169, 98, 0.4); }
            50% { box-shadow: 0 0 20px 5px rgba(201, 169, 98, 0.2); }
        }
        .feature-highlight { animation: pulse-glow 2s ease-in-out infinite; }
        
        @media (max-width: 768px) {
            .welcome-screen h1 { font-size: 22px; }
            .stats { gap: 16px; }
            .stat-number { font-size: 28px; }
            .magazine-grid { grid-template-columns: repeat(2, 1fr); gap: 10px; }
            .magazine-cover { height: 120px; }
            .magazine-title { font-size: 14px; }
            .magazine-info { padding: 10px; }
            .business-name { font-size: 16px; }
            .documents-grid { grid-template-columns: repeat(2, 1fr); }
            .header-branding { gap: 10px; }
            .business-logo { width: 36px; height: 36px; font-size: 16px; }
        }
    </style>
</head>
<body>
    <div class="demo-banner" id="demoBanner">
        üéØ Mode d√©mo ‚Äî Ceci est un aper√ßu du kiosque client
        <a href="index.html">‚Üê Retour au site</a>
    </div>

    <header class="header">
        <div class="header-content">
            <div class="header-branding">
                <div class="business-logo" id="businessLogo">ü¶∑</div>
                <div class="business-info">
                    <div class="business-name" id="businessName">Cabinet Dentaire Martin</div>
                    <div class="powered-by">Propuls√© par <span>NUMERIMAG</span></div>
                </div>
            </div>
            <div class="timer">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/><polyline points="12,6 12,12 16,14"/>
                </svg>
                <span id="timer">30:00</span>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="welcome-screen">
            <h1 id="welcomeMessage">Bienvenue chez Cabinet Dentaire Martin</h1>
            <p>Profitez de notre s√©lection de magazines pendant votre attente</p>
            <div class="stats">
                <div class="stat">
                    <div class="stat-number" id="magazineCount">0</div>
                    <div class="stat-label">Magazines</div>
                </div>
                <div class="stat">
                    <div class="stat-number" id="beCount">0</div>
                    <div class="stat-label">üáßüá™ Belges</div>
                </div>
                <div class="stat">
                    <div class="stat-number" id="frCount">0</div>
                    <div class="stat-label">üá´üá∑ Fran√ßais</div>
                </div>
                <div class="stat">
                    <div class="stat-number" id="catCount">0</div>
                    <div class="stat-label">Cat√©gories</div>
                </div>
            </div>
        </div>

        <div class="documents-section feature-highlight" id="documentsSection">
            <div class="documents-header">
                <div class="documents-title">
                    <span class="icon">üìÑ</span>
                    <span id="documentsTitle">Nos Documents</span>
                </div>
                <span class="pro-badge">Pro</span>
            </div>
            <div class="documents-grid" id="documentsGrid"></div>
        </div>

        <div class="section-divider">
            <div class="section-divider-line"></div>
            <div class="section-divider-title">üìö Magazines disponibles</div>
            <div class="section-divider-line"></div>
        </div>

        <div class="categories" id="categories"></div>
        <div class="magazine-grid" id="magazineGrid"></div>
    </main>

    <div class="reader-view" id="readerView">
        <div class="reader-header">
            <button class="reader-back" onclick="closeReader()">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                Retour
            </button>
            <span class="reader-title" id="readerTitle"></span>
            <span class="reader-source" id="readerSource"></span>
        </div>
        <div class="reader-content">
            <div class="reader-loading" id="readerLoading">
                <div class="spinner"></div>
                <div>Chargement...</div>
            </div>
            <iframe id="readerFrame" onload="hideLoading()" allow="fullscreen"></iframe>
        </div>
    </div>

    <script>
        // ==================== CONFIGURATION PAR TYPE ====================
        const businessTypes = {
            dentiste: {
                logo: 'ü¶∑',
                defaultName: 'Cabinet Dentaire Martin',
                documents: [
                    { id: 'tarifs', name: 'Nos Tarifs 2025', icon: 'üí∞', type: 'PDF' },
                    { id: 'soins', name: 'Guide des Soins', icon: 'ü¶∑', type: 'PDF' },
                    { id: 'promo', name: 'Offre Blanchiment -20%', icon: '‚ú®', type: 'PDF' },
                    { id: 'equipe', name: 'Notre √âquipe', icon: 'üë•', type: 'PDF' },
                ]
            },
            coiffeur: {
                logo: 'üíá',
                defaultName: 'Salon de Coiffure Marie',
                documents: [
                    { id: 'tarifs', name: 'Tarifs Coupes & Couleurs', icon: 'üí∞', type: 'PDF' },
                    { id: 'tendances', name: 'Tendances 2025', icon: '‚ú®', type: 'PDF' },
                    { id: 'promo', name: 'Offre Fid√©lit√©', icon: 'üéÅ', type: 'PDF' },
                    { id: 'produits', name: 'Nos Produits', icon: 'üß¥', type: 'PDF' },
                ]
            },
            garage: {
                logo: 'üöó',
                defaultName: 'Garage Dupont',
                documents: [
                    { id: 'tarifs', name: 'Tarifs Main d\'≈ìuvre', icon: 'üí∞', type: 'PDF' },
                    { id: 'entretien', name: 'Guide Entretien', icon: 'üîß', type: 'PDF' },
                    { id: 'promo', name: 'Promo Pneus Hiver', icon: '‚ùÑÔ∏è', type: 'PDF' },
                    { id: 'occasions', name: 'V√©hicules Occasion', icon: 'üöô', type: 'PDF' },
                ]
            },
            veterinaire: {
                logo: 'üêï',
                defaultName: 'Clinique V√©t√©rinaire des Ch√™nes',
                documents: [
                    { id: 'tarifs', name: 'Tarifs Consultations', icon: 'üí∞', type: 'PDF' },
                    { id: 'vaccins', name: 'Calendrier Vaccins', icon: 'üíâ', type: 'PDF' },
                    { id: 'conseils', name: 'Conseils Nutrition', icon: 'ü¶¥', type: 'PDF' },
                    { id: 'urgences', name: 'Num√©ros Urgences', icon: 'üö®', type: 'PDF' },
                ]
            },
            medecin: {
                logo: '‚öïÔ∏è',
                defaultName: 'Cabinet M√©dical Dr. Bernard',
                documents: [
                    { id: 'horaires', name: 'Horaires & Rdv', icon: 'üìÖ', type: 'PDF' },
                    { id: 'vaccins', name: 'Calendrier Vaccinal', icon: 'üíâ', type: 'PDF' },
                    { id: 'conseils', name: 'Conseils Sant√©', icon: '‚ù§Ô∏è', type: 'PDF' },
                    { id: 'equipe', name: 'Notre √âquipe', icon: 'üë•', type: 'PDF' },
                ]
            },
            opticien: {
                logo: 'üëì',
                defaultName: 'Optique Vision Plus',
                documents: [
                    { id: 'tarifs', name: 'Tarifs Verres & Montures', icon: 'üí∞', type: 'PDF' },
                    { id: 'marques', name: 'Nos Marques', icon: 'üï∂Ô∏è', type: 'PDF' },
                    { id: 'promo', name: 'Offre 2√®me paire', icon: 'üéÅ', type: 'PDF' },
                    { id: 'mutuelle', name: 'Remboursements', icon: 'üìã', type: 'PDF' },
                ]
            },
            pharmacie: {
                logo: 'üíä',
                defaultName: 'Pharmacie Centrale',
                documents: [
                    { id: 'garde', name: 'Pharmacies de Garde', icon: 'üåô', type: 'PDF' },
                    { id: 'conseils', name: 'Conseils Sant√©', icon: '‚ù§Ô∏è', type: 'PDF' },
                    { id: 'promo', name: 'Promotions du mois', icon: 'üéÅ', type: 'PDF' },
                    { id: 'services', name: 'Nos Services', icon: '‚ú®', type: 'PDF' },
                ]
            },
            beaute: {
                logo: 'üíÖ',
                defaultName: 'Institut Beaut√© & Bien-√™tre',
                documents: [
                    { id: 'tarifs', name: 'Carte des Soins', icon: 'üí∞', type: 'PDF' },
                    { id: 'soins', name: 'Nos Soins Visage', icon: '‚ú®', type: 'PDF' },
                    { id: 'promo', name: 'Forfait D√©tente', icon: 'üéÅ', type: 'PDF' },
                    { id: 'produits', name: 'Nos Produits', icon: 'üß¥', type: 'PDF' },
                ]
            },
            kine: {
                logo: 'üí™',
                defaultName: 'Cabinet de Kin√©sith√©rapie',
                documents: [
                    { id: 'tarifs', name: 'Tarifs & Remboursements', icon: 'üí∞', type: 'PDF' },
                    { id: 'exercices', name: 'Exercices Maison', icon: 'üèãÔ∏è', type: 'PDF' },
                    { id: 'conseils', name: 'Conseils Posture', icon: 'üßò', type: 'PDF' },
                    { id: 'equipe', name: 'Notre √âquipe', icon: 'üë•', type: 'PDF' },
                ]
            },
            default: {
                logo: 'üè¢',
                defaultName: 'Votre Entreprise',
                documents: [
                    { id: 'tarifs', name: 'Nos Tarifs', icon: 'üí∞', type: 'PDF' },
                    { id: 'services', name: 'Nos Services', icon: '‚ú®', type: 'PDF' },
                    { id: 'promo', name: 'Offres Sp√©ciales', icon: 'üéÅ', type: 'PDF' },
                    { id: 'equipe', name: 'Notre √âquipe', icon: 'üë•', type: 'PDF' },
                ]
            }
        };

        const magazines = [
            { id: 1, title: "Bruxelles Sant√©", subtitle: "Magazine officiel de la promotion de la sant√© √† Bruxelles", cover: "https://images.unsplash.com/photo-1538108149393-fbbd81895907?w=400&h=300&fit=crop", category: "bruxelles", date: "D√©c 2024", source: "Question Sant√©", country: "be", embedUrl: "https://www.calameo.com/read/000536529868a85a1e4fe", isNew: true },
            { id: 2, title: "Parlement Bruxellois", subtitle: "Rapport d'activit√©s de l'assembl√©e", cover: "https://images.unsplash.com/photo-1577495508326-19a1b3cf65b7?w=400&h=300&fit=crop", category: "bruxelles", date: "2023-2024", source: "Parlement.brussels", country: "be", embedUrl: "https://www.calameo.com/read/0003628289e1cd91f8dfc", isNew: false },
            { id: 3, title: "Schaerbeek Info", subtitle: "Magazine communal de Schaerbeek", cover: "https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=400&h=300&fit=crop", category: "bruxelles", date: "Nov 2024", source: "Schaerbeek", country: "be", embedUrl: "https://www.calameo.com/read/0029aborede71f8da3", isNew: true },
            { id: 4, title: "Uccle Magazine", subtitle: "Bulletin communal officiel d'Uccle", cover: "https://images.unsplash.com/photo-1519389950473-47ba0277781c?w=400&h=300&fit=crop", category: "bruxelles", date: "D√©c 2024", source: "Uccle", country: "be", embedUrl: "https://www.calameo.com/read/00057565977e2f1b8a9e6", isNew: true },
            { id: 5, title: "Wallonie Magazine", subtitle: "L'essentiel de l'actualit√© wallonne", cover: "https://images.unsplash.com/photo-1534237710431-e2fc698436d0?w=400&h=300&fit=crop", category: "wallonie", date: "Automne 2024", source: "Wallonie.be", country: "be", embedUrl: "https://www.calameo.com/read/000073aborec20d8b", isNew: true },
            { id: 6, title: "Li√®ge Magazine", subtitle: "Publication officielle de la Ville de Li√®ge", cover: "https://images.unsplash.com/photo-1555990793-da11153b2473?w=400&h=300&fit=crop", category: "wallonie", date: "Nov 2024", source: "Li√®ge", country: "be", embedUrl: "https://www.calameo.com/read/000215888fd4fa73f4e90", isNew: false },
            { id: 7, title: "Namur Confluent", subtitle: "Magazine de la Ville de Namur", cover: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=300&fit=crop", category: "wallonie", date: "Oct 2024", source: "Namur", country: "be", embedUrl: "https://www.calameo.com/read/001581580896f3d28c7ab", isNew: false },
            { id: 8, title: "Mutualit√© Chr√©tienne", subtitle: "En Marche - Magazine sant√©", cover: "https://images.unsplash.com/photo-1505751172876-fa1923c5c528?w=400&h=300&fit=crop", category: "sante", date: "Nov 2024", source: "MC", country: "be", embedUrl: "https://www.calameo.com/read/000233528d43fcaborec", isNew: true },
            { id: 9, title: "Sant√© & Bien-√™tre", subtitle: "Conseils sant√© pour tous", cover: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=300&fit=crop", category: "sante", date: "Hiver 2024", source: "Belgique Sant√©", country: "be", embedUrl: "https://www.calameo.com/read/0000073590b9f3c14bd8a", isNew: false },
            { id: 10, title: "Le Monde Diplomatique", subtitle: "Analyse internationale approfondie", cover: "https://images.unsplash.com/photo-1504711434969-e33886168f5c?w=400&h=300&fit=crop", category: "actu", date: "D√©c 2024", source: "LMD", country: "fr", embedUrl: "https://www.calameo.com/read/00016889965e0e8faborec", isNew: true },
            { id: 11, title: "Courrier International", subtitle: "Le meilleur de la presse mondiale", cover: "https://images.unsplash.com/photo-1495020689067-958852a7765e?w=400&h=300&fit=crop", category: "actu", date: "D√©c 2024", source: "CI", country: "fr", embedUrl: "https://www.calameo.com/read/0070aborec1c7a9bfe", isNew: true },
            { id: 12, title: "Cuisine Actuelle", subtitle: "Les meilleures recettes du moment", cover: "https://images.unsplash.com/photo-1466637574441-749b8f19452f?w=400&h=300&fit=crop", category: "cuisine", date: "D√©c 2024", source: "Prisma", country: "fr", embedUrl: "https://www.calameo.com/read/0009876545d2b3c4e", isNew: true },
            { id: 13, title: "Saveurs", subtitle: "L'art de vivre gourmand", cover: "https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=400&h=300&fit=crop", category: "cuisine", date: "Nov 2024", source: "Saveurs", country: "fr", embedUrl: "https://www.calameo.com/read/001234567890abcde", isNew: false },
            { id: 14, title: "Geo Magazine", subtitle: "D√©couvrez le monde autrement", cover: "https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?w=400&h=300&fit=crop", category: "voyage", date: "D√©c 2024", source: "Geo", country: "fr", embedUrl: "https://www.calameo.com/read/000123456789voyage", isNew: true },
            { id: 15, title: "Lonely Planet", subtitle: "Inspirations voyage", cover: "https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?w=400&h=300&fit=crop", category: "voyage", date: "Nov 2024", source: "LP", country: "fr", embedUrl: "https://www.calameo.com/read/000567890lonely", isNew: false },
            { id: 16, title: "T√©l√©rama", subtitle: "Culture, m√©dias, soci√©t√©", cover: "https://images.unsplash.com/photo-1594909122845-11baa439b7bf?w=400&h=300&fit=crop", category: "culture", date: "D√©c 2024", source: "T√©l√©rama", country: "fr", embedUrl: "https://www.calameo.com/read/00012345telerama", isNew: true },
            { id: 17, title: "Les Inrockuptibles", subtitle: "Musique, cin√©ma, livres", cover: "https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?w=400&h=300&fit=crop", category: "culture", date: "Nov 2024", source: "Inrocks", country: "fr", embedUrl: "https://www.calameo.com/read/00056789inrocks", isNew: false },
            { id: 18, title: "Auto Plus", subtitle: "Essais, actualit√©s automobiles", cover: "https://images.unsplash.com/photo-1494976388531-d1058494cdd8?w=400&h=300&fit=crop", category: "auto", date: "D√©c 2024", source: "Auto Plus", country: "fr", embedUrl: "https://www.calameo.com/read/000autoplus2024", isNew: true },
            { id: 19, title: "Moto Magazine", subtitle: "Passion deux roues", cover: "https://images.unsplash.com/photo-1558981806-ec527fa84c39?w=400&h=300&fit=crop", category: "auto", date: "Nov 2024", source: "Moto Mag", country: "fr", embedUrl: "https://www.calameo.com/read/000motomag2024", isNew: false },
            { id: 20, title: "Art & D√©coration", subtitle: "Inspirations d√©co int√©rieure", cover: "https://images.unsplash.com/photo-1616486338812-3dadae4b4ace?w=400&h=300&fit=crop", category: "maison", date: "Hiver 2024", source: "Art&D√©co", country: "fr", embedUrl: "https://www.calameo.com/read/000artdeco2024", isNew: true },
            { id: 21, title: "Maison Cr√©ative", subtitle: "DIY et am√©nagement", cover: "https://images.unsplash.com/photo-1618221195710-dd6b41faaea6?w=400&h=300&fit=crop", category: "maison", date: "Nov 2024", source: "MC", country: "fr", embedUrl: "https://www.calameo.com/read/000maisoncreative", isNew: false },
            { id: 22, title: "Science & Vie", subtitle: "Comprendre le monde", cover: "https://images.unsplash.com/photo-1507413245164-6160d8298b31?w=400&h=300&fit=crop", category: "culture", date: "D√©c 2024", source: "S&V", country: "fr", embedUrl: "https://www.calameo.com/read/000sciencevie", isNew: true },
            { id: 23, title: "Psychologies", subtitle: "Mieux se conna√Ætre", cover: "https://images.unsplash.com/photo-1544027993-37dbfe43562a?w=400&h=300&fit=crop", category: "sante", date: "D√©c 2024", source: "Psycho", country: "fr", embedUrl: "https://www.calameo.com/read/000psychologies", isNew: true },
        ];

        const categories = [
            { id: 'all', name: 'üåç Tous', emoji: 'üåç' },
            { id: 'bruxelles', name: 'üèõÔ∏è Bruxelles', emoji: 'üèõÔ∏è' },
            { id: 'wallonie', name: 'üå≤ Wallonie', emoji: 'üå≤' },
            { id: 'actu', name: 'üì∞ Actualit√©', emoji: 'üì∞' },
            { id: 'cuisine', name: 'üç≥ Cuisine', emoji: 'üç≥' },
            { id: 'sante', name: 'üíö Sant√©', emoji: 'üíö' },
            { id: 'voyage', name: '‚úàÔ∏è Voyage', emoji: '‚úàÔ∏è' },
            { id: 'culture', name: 'üé≠ Culture', emoji: 'üé≠' },
            { id: 'auto', name: 'üöó Auto', emoji: 'üöó' },
            { id: 'maison', name: 'üè† Maison', emoji: 'üè†' },
        ];

        let currentCategory = 'all';
        let timeRemaining = 30 * 60;
        let currentBusiness = null;
        let customData = null;

        function init() {
            // V√©rifier si des donn√©es personnalis√©es existent dans localStorage
            const savedData = localStorage.getItem('numerimag_admin_demo');
            if (savedData) {
                customData = JSON.parse(savedData);
            }

            // Parse URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const businessName = urlParams.get('business') || urlParams.get('b');
            const businessType = urlParams.get('type') || urlParams.get('t') || 'default';
            const customLogo = urlParams.get('logo') || urlParams.get('l');
            
            // Get business config
            currentBusiness = businessTypes[businessType] || businessTypes.default;
            
            // Utiliser les donn√©es personnalis√©es si elles existent et correspondent au type
            let finalName, finalLogo, documents;
            
            if (customData && customData.type === businessType) {
                // Utiliser les donn√©es de l'admin
                finalName = customData.businessName || businessName || currentBusiness.defaultName;
                
                // Logo personnalis√© (image ou emoji)
                if (customData.logo) {
                    finalLogo = { type: 'image', src: customData.logo };
                } else {
                    finalLogo = { type: 'emoji', src: customData.logoEmoji || customLogo || currentBusiness.logo };
                }
                
                // Documents personnalis√©s
                documents = customData.documents.map(doc => ({
                    id: doc.id,
                    name: doc.name,
                    icon: doc.icon,
                    type: 'PDF'
                }));
            } else {
                // Utiliser les param√®tres URL / d√©fauts
                finalName = businessName || currentBusiness.defaultName;
                finalLogo = { type: 'emoji', src: customLogo || currentBusiness.logo };
                documents = currentBusiness.documents;
            }
            
            // Appliquer le logo
            const logoEl = document.getElementById('businessLogo');
            if (finalLogo.type === 'image') {
                logoEl.innerHTML = `<img src="${finalLogo.src}" alt="Logo">`;
            } else {
                logoEl.textContent = finalLogo.src;
            }
            
            document.getElementById('businessName').textContent = finalName;
            document.getElementById('welcomeMessage').textContent = 'Bienvenue chez ' + finalName;
            
            // Render documents
            renderDocuments(documents);
            
            // Show demo banner if no loc param
            if (!urlParams.has('loc')) {
                document.getElementById('demoBanner').style.display = 'block';
            } else {
                document.getElementById('demoBanner').style.display = 'none';
            }
            
            renderCategories();
            renderMagazines();
            startTimer();
            updateStats();
        }

        function renderDocuments(docs) {
            const container = document.getElementById('documentsGrid');
            container.innerHTML = docs.map(doc => `
                <div class="document-card" onclick="openDocument('${doc.id}', '${doc.name}')">
                    <div class="document-icon">${doc.icon}</div>
                    <div class="document-name">${doc.name}</div>
                    <div class="document-type">${doc.type || 'PDF'}</div>
                </div>
            `).join('');
        }

        function updateStats() {
            document.getElementById('magazineCount').textContent = magazines.length;
            document.getElementById('beCount').textContent = magazines.filter(m => m.country === 'be').length;
            document.getElementById('frCount').textContent = magazines.filter(m => m.country === 'fr').length;
            document.getElementById('catCount').textContent = categories.length - 1;
        }

        function renderCategories() {
            const container = document.getElementById('categories');
            container.innerHTML = categories.map(cat => {
                const count = cat.id === 'all' ? magazines.length : magazines.filter(m => m.category === cat.id).length;
                if (count === 0 && cat.id !== 'all') return '';
                return `<button class="category-btn ${cat.id === currentCategory ? 'active' : ''}" onclick="filterCategory('${cat.id}')">${cat.emoji} ${cat.name.split(' ').slice(1).join(' ')} (${count})</button>`;
            }).join('');
        }

        function filterCategory(categoryId) {
            currentCategory = categoryId;
            renderCategories();
            renderMagazines();
            window.scrollTo({ top: 400, behavior: 'smooth' });
        }

        function renderMagazines() {
            const container = document.getElementById('magazineGrid');
            const filtered = currentCategory === 'all' ? magazines : magazines.filter(m => m.category === currentCategory);
            
            container.innerHTML = filtered.map(mag => `
                <div class="magazine-card" onclick="openMagazine(${mag.id})">
                    <div class="magazine-cover">
                        <img src="${mag.cover}" alt="${mag.title}" loading="lazy">
                        <div class="magazine-badges">
                            <span class="badge badge-${mag.country}">${mag.country === 'be' ? 'üáßüá™' : 'üá´üá∑'}</span>
                            ${mag.isNew ? '<span class="badge badge-new">NEW</span>' : ''}
                        </div>
                    </div>
                    <div class="magazine-info">
                        <h3 class="magazine-title">${mag.title}</h3>
                        <p class="magazine-subtitle">${mag.subtitle}</p>
                        <div class="magazine-meta">
                            <span>${mag.date}</span>
                            <span class="magazine-source">${mag.source}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function openMagazine(id) {
            const magazine = magazines.find(m => m.id === id);
            if (!magazine) return;
            
            document.getElementById('readerTitle').textContent = magazine.title;
            document.getElementById('readerSource').textContent = magazine.source;
            document.getElementById('readerLoading').style.display = 'block';
            document.getElementById('readerFrame').src = magazine.embedUrl;
            document.getElementById('readerView').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function openDocument(docId, docName) {
            alert('üìÑ Document: ' + docName + '\n\nEn version r√©elle, ce document PDF s\'ouvrirait ici.\n\n(Fonctionnalit√© PRO)');
        }

        function closeReader() {
            document.getElementById('readerView').classList.remove('active');
            document.getElementById('readerFrame').src = '';
            document.body.style.overflow = '';
        }

        function startTimer() {
            setInterval(() => {
                if (timeRemaining > 0) {
                    timeRemaining--;
                    const m = Math.floor(timeRemaining / 60);
                    const s = timeRemaining % 60;
                    document.getElementById('timer').textContent = `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
                }
            }, 1000);
        }

        document.addEventListener('keydown', e => { if (e.key === 'Escape') closeReader(); });
        init();
    </script>
</body>
</html>
